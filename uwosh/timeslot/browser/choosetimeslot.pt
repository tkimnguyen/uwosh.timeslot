<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="uwosh.timeslot">

<body>
    <div metal:fill-slot="main">
        <tal:main-macro metal:define-macro="main">

        <form method="POST" tal:attributes="action string:${context/absolute_url}/submit-user-selection;">

            <h2 tal:content="string:${context/Title} - Choose a TimeSlot" />
            <div id="days" tal:repeat="day context/getDays">
                <h3 tal:content="day/Title" />
                <table class="plain">
                    <tr>
                        <th>Select</th>
                        <th>Time</th>
                        <th>Available Spots</th>
                        <th>Waiting List Available</th>
                    </tr>
                    <tr tal:repeat="timeSlot day/getTimeSlots">
                        <td tal:define="userAlreadySignedup timeSlot/isCurrentUserSignedUpForThisSlot" >
                            <input tal:condition="not:userAlreadySignedup" type="radio" name="slotSelection"
                                   tal:attributes="value timeSlot/getLabel" /> 
                            <p tal:condition="userAlreadySignedup">You're registered</p>
                        </td>
                        <td>
                            <span tal:content="timeSlot/Title" />
                        </td>
                        <td>
                            <span tal:content="timeSlot/getNumberOfAvailableSpots" />
                        </td>
                        <td tal:define="allowWaitingList timeSlot/getAllowWaitingList">
                            <span tal:condition="allowWaitingList">
                                True
                            </span>
                            <span tal:condition="not:allowWaitingList">
                                False
                            </span>
                        </td>
                    </tr>
                </table>
            </div>
            
            <input type="submit" name="form.button.submit" value="Submit" />
            <input type="hidden" name="form.submitted" value="1" />
            <input tal:attributes="value member" type="hidden" name="memberToAssign" />
        </form>
        
        </tal:main-macro>
    </div>
</body>
</html>
