<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="uwosh.timeslot">

<body>
    <div metal:fill-slot="main">
        <tal:main-macro metal:define-macro="main">

         <form method="POST" tal:attributes="action string:${context/absolute_url}/submit-user-selection;">

            <h2 tal:content="view/getSignupSheetTitle" />
            <div id="days" tal:repeat="day view/getListOfDays">
                <h3 tal:content="day" />
                <table class="plain">
                    <tr>
                        <th>Select</th>
                        <th>Available Spots</th>
                        <th>Waiting List Available</th>
                        <th>Time</th>
                    </tr>
                    <tr tal:repeat="timeSlot python:view.getListOfTimeSlots(day)">
                        <td tal:define="userAlreadySignedup python:view.isUserSignedupForThisSlot(day, timeSlot)" >
                            <input tal:condition="not:userAlreadySignedup" type="radio" name="slotSelection"
                                   tal:attributes="value python:view.getTimeSlotLabel(day, timeSlot)" /> 
                            <p tal:condition="userAlreadySignedup">You're registered</p>
                        </td>
                        <td>
                            <span tal:content="python:view.getTimeSlotNumberOfAvailableSlots(day, timeSlot)" />
                        </td>
                        <td>
                            <span tal:condition="python:view.timeSlotAllowsWaitingList(day, timeSlot)">
                                True
                            </span>
                            <span tal:condition="not:python:view.timeSlotAllowsWaitingList(day, timeSlot)">
                                False
                            </span>
                        </td>
                        <td>
                            <span tal:content="timeSlot" />
                        </td>
                    </tr>
                </table>
            </div>
            
            <input type="submit" name="form.button.submit" value="Submit" />
            <input type="hidden" name="form.submitted" value="1" />
            <input tal:attributes="value member" type="hidden" name="memberToAssign" />
        </form>
        
        </tal:main-macro>
    </div>
</body>
</html>
