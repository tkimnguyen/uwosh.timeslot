<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="uwosh.timeslot">

<body>
    <div metal:fill-slot="main">
	<tal:main-macro metal:define-macro="main"
                        tal:define="contextIsMasterSignupSheet context/isMasterSignupSheet">
      
            <h2 tal:content="string:${context/Title} - Manager Summary" />

            <tal:block tal:repeat="signupSheet context/getSignupSheets">

		<tal:block tal:condition="not:signupSheet/isMasterSignupSheet"
                           tal:define="days signupSheet/getDays">
		
		    <dl tal:omit-tag="not:contextIsMasterSignupSheet" class="collapsible collapsed OnLoad">

			<dt tal:condition="contextIsMasterSignupSheet" tal:content="signupSheet/Title"
			    style="font-size: large" class="collapsibleHeader" />
				  
		        <dd tal:omit-tag="not:contextIsMasterSignupSheet" class="collapsibleContent">
			    <table class="plain">
				<tal:block tal:condition="not:days">
			            <tr style="background-color: #F0F0F0">
					<th style="border: none">
				            <h3>No days have been made available for this signup sheet yet.</h3>
					</th>
				    </tr>
				</tal:block>

				<tal:block tal:repeat="day days">
				    <tr style="background-color: #F0F0F0">
				        <th style="border: none" colspan="1">
					   <h3>
					       <a tal:attributes="href day/absolute_url" tal:content="day/Title" />
					   </h3>
					</th>
					<th colspan="4" />
				    </tr>

				    <tr>
					<th>Time</th>
                                        <th>Name</th>
					<th>Status</th>    
					<th>Email</th>
					<th>Extra Info (Phone - Class. - Dept.)</th>           
			            </tr>

				    <tal:block tal:define="timeSlots day/getTimeSlots">
			                <tr tal:condition="not:timeSlots">
					    <td colspan="5">No slots have been made available for this day yet.</td>
			                </tr>
				        <tal:block tal:repeat="timeSlot timeSlots">
					    <tr style="background-color: #F0F0F0">
					        <th>
					  	    <a tal:attributes="href timeSlot/absolute_url" tal:content="timeSlot/Title" />
					        </th>
					        <th colspan="4" />
					    </tr>
					    <tal:block tal:define="people timeSlot/getPeople">
					        <tr tal:condition="not:people">
						    <td />
						    <td colspan="4">No one is signed up yet.</td>
						</tr>
						<tr tal:repeat="person people">
						    <td />
					            <td>
					                <a tal:attributes="href person/absolute_url" tal:content="person/Title" />
					            </td>
						    <td tal:content="person/getReviewStateTitle" />
						    <td tal:content="person/getEmail" />
						    <td tal:content="person/getExtraInfo" />
						</tr>
					    </tal:block>	
					</tal:block>    
				    </tal:block>
				</tal:block>
		            </table>
			    <br />
			</dd>
		    </dl>
		    <br />
         	</tal:block>	
            </tal:block>
        </tal:main-macro>
    </div>
</body>
</html>
