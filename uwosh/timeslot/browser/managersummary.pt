<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="uwosh.timeslot">

<body>
    <div metal:fill-slot="main">
        <tal:main-macro metal:define-macro="main">

            <h2 tal:content="string:${context/Title} - Manager Summary" />
            
            <table class="plain">
                <tal:block tal:repeat="day context/getDays">
                    <tr>
                        <th>
                            <h3>
                                <a tal:attributes="href day/absolute_url" tal:content="day/Title" />
                            </h3>
                        </th>
                        <th colspan="4">
                            <a tal:attributes="href string:${context/absolute_url}/remove-all-people-from-day?daySelection=${day/Title};">
                                Remove everyone from this day
                            </a>
                        </th>
                    </tr>
                
                    <tr>
                            <th>Time</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Extra Info (Phone, Class., Dept.)</th>
                            <th>Status</th>                        
                    </tr>
                    
                    <tal:block tal:repeat="timeSlot day/getTimeSlots">
                        <tr style="background-color: #F0F0F0">
                            <th>
                                <a tal:attributes="href timeSlot/absolute_url" tal:content="timeSlot/Title" />
                            </th>
                            <th colspan="4" />
                        </tr>
                        <tr tal:condition="not:timeSlot/getPeople">
                            <td />
                            <td>No one is signed up</td>
                            <td colspan="3" />
                        </tr>
                        <tr tal:repeat="person timeSlot/getPeople">
                            <td />
                            <td>
                                <a tal:attributes="href person/absolute_url" tal:content="person/Title" />
                            </td>
                            <td tal:content="person/getEmail" />
                            <td>
                                <tal:block tal:define="phone person/getPhone; classification person/getClassification; dept person/getDepartment"
                                           tal:content="string:${phone}, ${classification}, ${dept}" />
                            </td>
                            <td tal:content="person/getReviewState" />
                        </tr>
                    </tal:block>
                
                </tal:block>
            </table>
            <br />
            <br />
            <p>
                <a tal:attributes="href string:${context/absolute_url};">Return to the Choose a Date and Time view</a>
            </p>
        
        </tal:main-macro>
    </div>
</body>
</html>
